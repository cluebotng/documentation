# ClueBot NG

This bot provides page anti-vandalism checking on English Wikipedia.

Wiki account: https://en.wikipedia.org/wiki/User:ClueBot_NG

## Components

There are numerous moving parts in the ClueBot NG ecosystem with interdependencies.

* [Bot](bot/)
* [Report Interface](report/)
* [Review Interface](review/)
* [Trainer](trainer/)

## Very high level flow

### Bot
```
+---------------+
| #en.wikipedia |
|               |
|  irc  stream  |
+---------------+
        |                  
+----------------------------------------------------------------------+     +-------------+
|                                 bot                                  | --> |   tool-db   |
+----------------------------------------------------------------------+     +-------------+
      |             |              |              |              |                  |
+-----------+  +-----------+  +-----------+  +-----------+  +----------+     +-------------+
| IRC relay |  | User Talk |  |    AIV    |  |  enwiki_p |  |  api.php |     | `vandalism` |
+-----------+  +-----------+  +-----------+  +-----------+  +----------+     +-------------+
      |
+-------------+
| Librea.Chat |
+-------------+
```

### Report
```
                   +-------------+
                   |  tools-db   |
                   | `vandalism` |
                   +-------------+
                          |
+------------+     +-------------+     +-------------+     +----------------+
|    User    | --> |  `report`   | --> |    Admin    | --> |    Invalid     |
+------------+     +-------------+     +-------------+     +----------------+
                                              `            +----------------+     +---------------+
                                              `----------> | Send to Review | --> | review.export |
                                                           +----------------+     +---------------+

+-------------+     +-----------------------+     +--------------+
| Review Edit | --> | Queued to be reviewed | --> | review.import|
+-------------+     +-----------------------+     +--------------+
                    +-----------------------+             |
                    | Queued to be reviewed | <-----------|
                    +-----------------------+             |
                    +--------------------+                |
                    | Partially reviewed |    <-----------|
                    +--------------------+                |
                    +-----------------------+             |
                    | Reviewed Constructive | <-----------|
                    +-----------------------+             |
                    +--------------------+                |
                    | Reviewed Vandalism |    <-----------|
                    +--------------------+                |
                    +------------------+                  |
                    | Reviewed Skipped |      <-----------|
                    +------------------+                  |
                    +---------+                           |
                    | Deleted |               <-----------|
                    +---------+
```

### Trainer
```
+-------------+     +-------------+
|  Review API | --> | Edit Groups | 
+-------------+     +-------------+

+-------------+     +-----------+     +-------------+     +----------+
|  Review API | --> | WPEditSet | --> | Bayes Train | --> | Bayes DB |
+-------------+     +-----------+     +-------------+     +----------+
                          `---------> +-----------+     +------------+
                                      | ANN Train | --> | Create ANN |
                                      +-----------+     +------------+

+-------------+     +-----------+     +--------------+
|  Review API | --> | WPEditSet | --> | Trial Report |
+-------------+     +-----------+     +--------------+
```
